<!doctype html>
html(lang="fr", dir="ldiv")
  head
    meta(charset="utf-8")
    meta(http-equiv="x-ua-compatible", content="ie=edge")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    meta(name="theme-color", content="#2196F3")
    meta(name="apple-mobile-web-app-capable", content="yes")
    title=title
    meta(name="description", content="App pour compter le score au Cricket cutthroat")
    style(type="text/css").
      .table-responsive,.container {
        display: none;
      }
      .mymodal {
        display: block;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 1050;
      }
      .mymodal-dialog {
        -webkit-transform: translate(0,0);
        -ms-transform: translate(0,0);
        -o-transform: translate(0,0);
        margin: 10px;
      }
      .mymodal-content {
        width: fit-content;
        border: 1px solid rgba(0,0,0,.2);
        border-radius: 6px;
        background-color: #fff;
        box-shadow: 0 3px 9px rgba(0,0,0,.5);
      }
      .mymodal-header {
        padding: 15px;
        border-bottom: 1px solid #e5e5e5;
      }
      .mymodal-body {
        padding: 15px;
        border-bottom: 1px solid #e5e5e5;
      }
      .mymodal-footer {
        padding: 15px;
        text-align: right;
        border-bottom: 1px solid #e5e5e5;
      }
      .mymodal-title {
        margin: 0px;
        line-height: 1.42857143;
      }
      h4 {
        font-size: 18px;
        font-weight: 500;
      }
      button {
        border-radius: 4px;
        background-color: #fff;
        border-color: #ccc;
        padding: 6px 12px;
      }
    link(rel="icon", type="image/png", href="./favicon.png")
    link(rel="manifest", href="/manifest.json")
    noscript
      h1 You donâ€™t have javascript enabled.
      p Please enable it to get the full experience.
    script(defer, src="js/concat.js")
    script(defer, src='models/model.js')
  body
    header
      div.mymodal(id="myModal", role="dialog")
        div.mymodal-dialog.modal-sm
          div.mymodal-content
            div.mymodal-header
              h4.mymodal-title Add or Del players
            div.mymodal-body
              button.btn.btn-default(id="addPlayer", aria-label="Ajouter joueur") 
                span.glyphicon.glyphicon-plus Add Player
              button.btn.btn-default(id="deletePlayer", aria-label="Enlever joueur") 
                span.glyphicon.glyphicon-minus Delete Player
            div.mymodal-footer
              button.btn.btn-default(data-dismiss="modal", id="startGame", aria-label="Lancer la partie") Start game
    div.table-responsive.container
      - var countItem = 0;
      each item in pageData.item
        div.row
          - var countName = 0;
          each name in pageData.name
            case countItem
              when 0
                if countName > 0
                  div.col(class="Joueur_#{countName} Ligne_#{item}")
                    input.text-center.joueur(type="text", name="Joueur_#{countName}", value="#{name}", aria-label="Nom du joueur")
                else 
                  div.col.control_grid(class="Joueur_#{countName}")
                    button.btn.btn-danger.control_button(id="next", aria-label="Joueur suivant")
                      span.glyphicon.glyphicon-play
                    button.btn.btn-primary.control_button(id="undo", aria-label="Annuler le dernier coup")
                      span.glyphicon.glyphicon-backward
                    span(id="round") 1
              when 1
                if countName > 0
                  div.col(class="Joueur_#{countName} Ligne_score")
                    span(id="Joueur_#{countName}") 0
                else 
                  div.col(class="Joueur_#{countName} Ligne_#{item}")
                    span #{item}
              default
                if countName > 0
                  div.col.case(class="Joueur_#{countName} Ligne_#{item}")
                      svg.scoreGrid(svgid="0", idRow="#{item}", idColumn="Joueur_#{countName}", id="#{item}_Joueur_#{countName}", viewBox="0 0 50 50", preserveAspecdivatio="xMidYMin meet", xmlns="http://www.w3.org/2000/svg", xmlns:svg="http://www.w3.org/2000/svg") I'm sorry, your browser does not support SVG images
                else 
                  div.col(class="Joueur_#{countName} Ligne_#{item}")
                    span #{item}
            - countName++;
        - countItem++;
    footer
      script.
        var css = document.createElement('link');
        css.rel = 'stylesheet';
        css.href = '/styles/style.css';
        css.type = 'text/css';
        var link = document.getElementsByTagName('link')[0];
        link.parentNode.insertBefore(css, link);
        
        var css2 = document.createElement('link');
        css2.rel = 'stylesheet';
        css2.href = 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css';
        css2.type = 'text/css';
        var link2 = document.getElementsByTagName('link')[0];
        link2.parentNode.insertBefore(css2, link2);
        
        // var css3 = document.createElement('link');
        // css3.rel = 'stylesheet';
        // css3.href = '/styles/toasdiv.min.css';
        // css3.type = 'text/css';
        // var link3 = document.getElementsByTagName('link')[0];
        // link3.parentNode.insertBefore(css3, link3);
        
        if('serviceWorker' in navigator) {
          window.addEventListener("load", function () {
            navigator.serviceWorker.register('/sw.js').then(function(regisdivation) { 
              console.log("Service Worker Registered with scope: ", regisdivation.scope);
              }, function(err) {
                console.log('ServiceWorker regisdivation failed: ', err);
              });
          });
        }